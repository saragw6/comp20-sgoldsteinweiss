<!DOCTYPE html>
<html>
	<head>
		<title>MapChat</title>
		<meta name="viewport" content="initial-scale=1.0">
		<meta charset="utf-8">
		<script src="https://maps.google.com/maps/api/js?sensor=true"></script>
		<!-- this might go here: <script src="https://secret-about-box.herokuapp.com/sendLocation"></script> -->
		<link rel="stylesheet" href="style.css">
		<script>
			function init() {
			var map = new google.maps.Map(document.getElementById('map_canvas'), {
	    		center: {lat: -34.397, lng: 150.644},
	    		zoom: 8
	 		});

			//Getting (& Sending?) Location
			if (navigator.geolocation) { // the navigator.geolocation object is supported on your browser
					navigator.geolocation.getCurrentPosition(function(position) {
							myLat = position.coords.latitude;
							myLng = position.coords.longitude;
							alert("Your location is (" + myLat + ", " + myLng + ").");

							var http = new XMLHttpRequest();
							http.open("POST", "https://secret-about-box.herokuapp.com/sendLocation", true)
							http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
							http.onreadystatechange = function() {if(http.readyState == 4 && http.status == 200) {
								alert(http.responseText);
							}
							}
							http.send("login=TomDapper&lat=myLat&lng=myLng&message=Hi")
						});
				}
				else {
					alert("Geolocation is not supported by your web browser.  What a shame!");
				}

			}
		</script>	
	</head>

	<body onload="init()">
		<div id="map_canvas"></div>
	</body>
</html>